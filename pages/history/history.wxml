<!-- pages/history/history.wxml -->
<view class="page">
  <view class="head">History</view>

  <!-- 空状态 -->
  <view
    class="empty"
    wx:if="{{leftList.length === 0 && rightList.length === 0}}"
  >
    <text class="empty-text">No history.</text>
  </view>

  <!-- 瀑布流容器 -->
  <view class="waterfall">

    <!-- 左列 -->
    <view class="column">
      <block wx:for="{{leftList}}" wx:key="id">
        <view class="card" bindtap="goDetail" data-id="{{item.id}}">

          <!-- 封面图：取第一张图片 -->
          <image
            class="cover"
            src="{{item.images && item.images.length ? item.images[0] : '/images/default.jpg'}}"
            mode="widthFix"
          />

          <view class="content">
            <view class="title">{{item.title}}</view>

            <view class="user">
              <image
                class="avatar"
                src="{{item.avatar || '/images/default_avatar.png'}}"
              />
              <text class="nickname">{{item.user_name}}</text>
            </view>
          </view>

        </view>
      </block>
    </view>

    <!-- 右列 -->
    <view class="column">
      <block wx:for="{{rightList}}" wx:key="id">
        <view class="card" bindtap="goDetail" data-id="{{item.id}}">

          <!-- 封面图：取第一张图片 -->
          <image
            class="cover"
            src="{{item.images && item.images.length ? item.images[0] : '/images/default.jpg'}}"
            mode="widthFix"
          />

          <view class="content">
            <view class="title">{{item.title}}</view>

            <view class="user">
              <image
                class="avatar"
                src="{{item.avatar || '/images/default_avatar.png'}}"
              />
              <text class="nickname">{{item.user_name}}</text>
            </view>
          </view>

        </view>
      </block>
    </view>

  </view>
</view>
